<script>
function loadRSS() {
  const url =
    "https://api.allorigins.win/raw?url=" +
    encodeURIComponent("https://galuhmaher.bearblog.dev/rss/");

  fetch(url)
    .then(res => res.text())
    .then(str => new DOMParser().parseFromString(str, "text/xml"))
    .then(xml => {
      const items = [...xml.querySelectorAll("item")];

      // FILTER CATEGORY = status
      const statusPosts = items.filter(item => {
        const categories = [...item.querySelectorAll("category")].map(c =>
          c.textContent.toLowerCase()
        );
        return categories.includes("status");
      });

      // AMBIL 3 TERATAS
      const top3 = statusPosts.slice(0, 1);

      let html = "";

      top3.forEach(item => {
        const dateRaw = item.querySelector("pubDate").textContent;
        const desc = item.querySelector("description").textContent;

        const date = new Date(dateRaw).toLocaleDateString("id-ID", {
          day: "numeric",
          month: "long",
          year: "numeric"
        });

        html += `
          <div>
            <strong><a href="https://galuhmaher.bearblog.dev" target="_blank">Galuh Maher</a></strong> â€” ${date}
            <p>${desc}</p>
          </div>
        `;
      });

      document.getElementById("rss").innerHTML = html;
    })
    .catch(err => {
      document.getElementById("rss").innerHTML =
        "Gagal memuat RSS: " + err;
    });
}

// JALANKAN SEKALI SAAT PERTAMA LOAD
loadRSS();

// AUTO-REFRESH SETIAP 2 MENIT
setInterval(loadRSS, 120000);
</script>